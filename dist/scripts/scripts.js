"use strict";function jsonDataArray(t){for(var e=t[0],n=[],r=1,o=t.length;o>r;r++){for(var a=t[r],c={},u=0;u<a.length;u++)c[e[u]]=a[u];n.push(c)}return n}function CSVToArray(t,e){e=e||",";for(var n=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),r=[[]],o=null;o=n.exec(t);){var a=o[1];if(a.length&&a!=e&&r.push([]),o[2])var c=o[2].replace(new RegExp('""',"g"),'"');else var c=o[3];r[r.length-1].push(c)}return jsonDataArray(r)}angular.module("norluxAngularApp",["ngAnimate","ngCookies","angular.filter","ngResource","ngRoute","ngSanitize","ngTouch","btford.markdown","ui.bootstrap"]).config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}),e.html5Mode(!0)}]),angular.module("norluxAngularApp").controller("MainCtrl",["$scope",function(t){t.$on("$locationChangeStart",function(t){t.preventDefault()}),t.search="",(new WOW).init()}]),angular.module("norluxAngularApp").controller("CarouselCtrl",["$scope","$http",function(t,e){t.$on("$locationChangeStart",function(t){t.preventDefault()}),e.get("markdown/main_carousel_images.md").then(function(e){var n=JSON.stringify(e.data).replace(/\\n/g,",").replace(/"/g,"").split(",");t.mainCarouselImages=n.map(function(t,e){return{image:t}}),t.mainCarouselImages.pop()})}]),angular.module("norluxAngularApp").controller("CaseStudyCtrl",["$scope","$http","$modal",function(t,e,n){t.$on("$locationChangeStart",function(t){t.preventDefault()}),e.get("markdown/case_study_images.md").then(function(e){var n=JSON.stringify(e.data).replace(/\\n/g,",").replace(/"/g,"").split(",");t.caseStudiesImages=n.map(function(t,e){return{image:t}}),t.caseStudiesImages.pop(),t.limit=16,t.loadMore=function(){t.limit=t.limit+16,t.limit>=t.caseStudiesImages.length&&$(".case_study_button").hide()}}),t.caseStudiesFiles=function(t,e){if(e)return"images/case_studies/"+t+".png"}}]),angular.module("norluxAngularApp").controller("ProductCtrl",["$scope","Products","$modal","$http","$timeout",function(t,e,n,r,o){t.$on("$locationChangeStart",function(t){t.preventDefault()}),e.then(function(e){var a=[];t.categories=[],t.categoryProducts=[],t.products=e,t.products.map(function(e){if(e.hasOwnProperty("category")&&a.indexOf(e.category)<0){a.push(e.category);var n={category:e.category,products:[]};t.categories.push(n)}}),t.products.map(function(e){for(var n in t.categories)e.category===t.categories[n].category&&t.categories[n].products.push(e)}),t.openProduct=function(e,r){t.categoryProducts=e.products||e;for(var o in t.categoryProducts)t.categoryProducts[o].id===r.id&&(t.categoryProducts[o].active=!0);t.modalInstance=n.open({templateUrl:"views/view-product-modal.html",scope:t,windowClass:"productModal"}),t.modalInstance.opened.then(function(){var e,n=function(){if(e=document.getElementsByClassName("productModal")[0]){var n=$(e).find(".item").length-1;clearInterval(r),$(e).find(".loader").hide(),$(e).find(".carousel-inner").fadeIn(),$(e).find(".carousel-control").fadeIn(),$(e).find(".item").each(function(t,r){return 0===t&&$(r).hasClass("active")?($(e).find(".left.carousel-control").hide(),!1):t===n&&$(r).hasClass("active")?($(e).find(".right.carousel-control").hide(),!1):void 0}),t.onSlideChanged=function(t,r,o){return 0===o?($(e).find(".left.carousel-control").hide(),!1):o===n?($(e).find(".right.carousel-control").hide(),!1):($(e).find(".left.carousel-control").show(),void $(e).find(".right.carousel-control").show())}}};if(e=document.getElementsByClassName("productModal")[0],!e)var r=setInterval(n,2e3)})},t.closeProduct=function(){for(var e in t.categoryProducts)t.categoryProducts[e].hasOwnProperty("active")&&(t.categoryProducts[e].active=!1);t.modalInstance.close()},t.productEnquiry=function(e){r.get("markdown/product-enquiry-message.md").then(function(n){var r=n.data.replace("{}",e.product).toString();t.modalInstance.close(),$("#searchModal").modal("hide"),t.closeProduct(),$("#contact-form").find('textarea[name="message"]').val(r),o(function(){$("body, html").animate({scrollTop:$("#contact-form").offset().top-77},"slow"),$("#contact-form").find('input[name="name"]').focus()},1)})}}),t.productFilter="LED Spotlights",t.filterCategory=function(e){t.productFilter!=e&&($(".products-container .thumbnail").hide(),t.productFilter=e)}}]),angular.module("norluxAngularApp").controller("StoreCtrl",["$scope","Stores","$filter",function(t,e,n){t.$on("$locationChangeStart",function(t){t.preventDefault()}),e.then(function(e){var n=[];t.stores=e,t.storesToFilter=function(){return n=[],t.stores},t.filterStores=function(t){var e=n.indexOf(t.country)==-1;return e&&n.push(t.country),e}})}]),angular.module("norluxAngularApp").directive("scrollOnClick",["$timeout",function(t){return{restrict:"A",link:function(e,n,r){var o=r.href;n.on("click",function(e){e.preventDefault();var r,a=$(document).scrollTop();r=o?$(o):n,a!==r.offset().top-77&&t(function(){$("body, html").animate({scrollTop:r.offset().top-77},"slow")},1),$("#menuModal").modal("hide")})}}}]),angular.module("norluxAngularApp").directive("onCarouselChange",["$parse",function(t){return{require:"carousel",link:function(e,n,r,o){var a=t(r.onCarouselChange),c=o.select;o.select=function(t,n,r){return t!==this.currentSlide&&a(e,{nextSlide:t,direction:n,nextIndex:o.slides.indexOf(t)}),c.apply(this,arguments)}}}}]),angular.module("norluxAngularApp").factory("Products",["$http",function(t){var e="csv/products.csv",n=t.get(e).then(function(t){return CSVToArray(t.data)});return n}]),angular.module("norluxAngularApp").factory("Stores",["$http",function(t){var e="csv/stores.csv",n=t.get(e).then(function(t){return CSVToArray(t.data)});return n}]),angular.module("norluxAngularApp").filter("trustAsHtml",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]);