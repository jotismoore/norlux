"use strict";function jsonDataArray(t){for(var n=t[0],e=[],r=1,o=t.length;o>r;r++){for(var a=t[r],u={},c=0;c<a.length;c++)u[n[c]]=a[c];e.push(u)}return e}function CSVToArray(t,n){n=n||",";for(var e=new RegExp("(\\"+n+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+n+"\\r\\n]*))","gi"),r=[[]],o=null;o=e.exec(t);){var a=o[1];if(a.length&&a!=n&&r.push([]),o[2])var u=o[2].replace(new RegExp('""',"g"),'"');else var u=o[3];r[r.length-1].push(u)}return jsonDataArray(r)}angular.module("norluxAngularApp",["ngAnimate","ngCookies","angular.filter","ngResource","ngRoute","ngSanitize","ngTouch","btford.markdown","ui.bootstrap"]).config(["$routeProvider","$locationProvider",function(t,n){t.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}),n.html5Mode(!0)}]),angular.module("norluxAngularApp").controller("MainCtrl",["$scope",function(t){t.$on("$locationChangeStart",function(t){t.preventDefault()}),t.search="",(new WOW).init()}]),angular.module("norluxAngularApp").controller("CarouselCtrl",["$scope","$http",function(t,n){t.$on("$locationChangeStart",function(t){t.preventDefault()}),n.get("markdown/main_carousel_images.md").then(function(n){var e=JSON.stringify(n.data).replace(/\\n/g,",").replace(/"/g,"").split(",");t.mainCarouselImages=e.map(function(t,n){return{image:t}}),t.mainCarouselImages.pop()})}]),angular.module("norluxAngularApp").controller("CaseStudyCtrl",["$scope","$http","$modal",function(t,n,e){t.$on("$locationChangeStart",function(t){t.preventDefault()}),n.get("markdown/case_study_images.md").then(function(n){var e=JSON.stringify(n.data).replace(/\\n/g,",").replace(/"/g,"").split(",");t.caseStudiesImages=e.map(function(t,n){return{image:t}}),t.caseStudiesImages.pop(),t.limit=16,t.loadMore=function(){t.limit=t.limit+16,t.limit>=t.caseStudiesImages.length&&$(".case_study_button").hide()}}),t.caseStudiesFiles=function(t,n){if(n)return"images/case_studies/"+t+".png"}}]),angular.module("norluxAngularApp").controller("ProductCtrl",["$scope","Products","$modal","$http",function(t,n,e,r){t.$on("$locationChangeStart",function(t){t.preventDefault()}),n.then(function(n){var o=[];t.categories=[],t.categoryProducts=[],t.products=n,t.products.map(function(n){if(n.hasOwnProperty("category")&&o.indexOf(n.category)<0){o.push(n.category);var e={category:n.category,products:[]};t.categories.push(e)}}),t.products.map(function(n){for(var e in t.categories)n.category===t.categories[e].category&&t.categories[e].products.push(n)}),t.openProduct=function(n,r){t.categoryProducts=n.products||n;for(var o in t.categoryProducts)t.categoryProducts[o].id===r.id&&(t.categoryProducts[o].active=!0);t.modalInstance=e.open({templateUrl:"views/view-product-modal.html",scope:t,windowClass:"productModal"}),t.modalInstance.opened.then(function(){var n,e=function(){if(n=document.getElementsByClassName("productModal")[0]){var e=$(n).find(".item").length-1;clearInterval(r),$(n).find(".loader").hide(),$(n).find(".carousel-inner").fadeIn(),$(n).find(".carousel-control").fadeIn(),$(n).find(".item").each(function(t,r){return 0===t&&$(r).hasClass("active")?($(n).find(".left.carousel-control").hide(),!1):t===e&&$(r).hasClass("active")?($(n).find(".right.carousel-control").hide(),!1):void 0}),t.onSlideChanged=function(t,r,o){return 0===o?($(n).find(".left.carousel-control").hide(),!1):o===e?($(n).find(".right.carousel-control").hide(),!1):($(n).find(".left.carousel-control").show(),void $(n).find(".right.carousel-control").show())}}};if(n=document.getElementsByClassName("productModal")[0],!n)var r=setInterval(e,2e3)})},t.closeProduct=function(){for(var n in t.categoryProducts)t.categoryProducts[n].hasOwnProperty("active")&&(t.categoryProducts[n].active=!1);t.modalInstance.close()},t.productEnquiry=function(n){r.get("markdown/product-enquiry-message.md").then(function(e){var r=e.data.replace("{}",n.product).toString();t.modalInstance.close(),t.closeProduct(),$("#contact-form").find('input[name="name"]').focus(),$("#contact-form").find('textarea[name="message"]').val(r)})}}),t.productFilter="LED Spotlights",t.filterCategory=function(n){t.productFilter!=n&&($(".products-container .thumbnail").hide(),t.productFilter=n)}}]),angular.module("norluxAngularApp").controller("StoreCtrl",["$scope","Stores","$filter",function(t,n,e){t.$on("$locationChangeStart",function(t){t.preventDefault()}),n.then(function(n){var e=[];t.stores=n,t.storesToFilter=function(){return e=[],t.stores},t.filterStores=function(t){var n=e.indexOf(t.country)==-1;return n&&e.push(t.country),n}})}]),angular.module("norluxAngularApp").directive("scrollOnClick",["$timeout",function(t){return{restrict:"A",link:function(n,e,r){var o=r.href;e.on("click",function(n){n.preventDefault();var r,a=$(document).scrollTop();r=o?$(o):e,a!==r.offset().top-77&&t(function(){$("body, html").animate({scrollTop:r.offset().top-77},"slow")},1),$("#menuModal").modal("hide")})}}}]),angular.module("norluxAngularApp").directive("onCarouselChange",["$parse",function(t){return{require:"carousel",link:function(n,e,r,o){var a=t(r.onCarouselChange),u=o.select;o.select=function(t,e,r){return t!==this.currentSlide&&a(n,{nextSlide:t,direction:e,nextIndex:o.slides.indexOf(t)}),u.apply(this,arguments)}}}}]),angular.module("norluxAngularApp").factory("Products",["$http",function(t){var n="csv/products.csv",e=t.get(n).then(function(t){return CSVToArray(t.data)});return e}]),angular.module("norluxAngularApp").factory("Stores",["$http",function(t){var n="csv/stores.csv",e=t.get(n).then(function(t){return CSVToArray(t.data)});return e}]),angular.module("norluxAngularApp").filter("trustAsHtml",["$sce",function(t){return function(n){return t.trustAsHtml(n)}}]);