"use strict";function jsonDataArray(n){for(var t=n[0],r=[],e=1,o=n.length;o>e;e++){for(var a=n[e],u={},l=0;l<a.length;l++)u[t[l]]=a[l];r.push(u)}return r}function CSVToArray(n,t){t=t||",";for(var r=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),e=[[]],o=null;o=r.exec(n);){var a=o[1];if(a.length&&a!=t&&e.push([]),o[2])var u=o[2].replace(new RegExp('""',"g"),'"');else var u=o[3];e[e.length-1].push(u)}return jsonDataArray(e)}angular.module("norluxAngularApp",["ngAnimate","ngCookies","angular.filter","ngResource","ngRoute","ngSanitize","ngTouch","btford.markdown","ui.bootstrap"]).config(["$routeProvider","$locationProvider",function(n,t){n.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}),t.html5Mode(!0)}]),angular.module("norluxAngularApp").controller("MainCtrl",["$scope",function(n){n.$on("$locationChangeStart",function(n){n.preventDefault()}),n.search="",(new WOW).init()}]),angular.module("norluxAngularApp").controller("CarouselCtrl",["$scope","$http",function(n,t){n.$on("$locationChangeStart",function(n){n.preventDefault()}),t.get("markdown/main_carousel_images.md").then(function(t){var r=JSON.stringify(t.data).replace(/\\n/g,",").replace(/"/g,"").split(",");n.mainCarouselImages=Object.values(r.map(function(n,t){return{image:n}})),n.mainCarouselImages.pop()})}]),angular.module("norluxAngularApp").controller("CaseStudyCtrl",["$scope","$http","$modal",function(n,t,r){n.$on("$locationChangeStart",function(n){n.preventDefault()}),t.get("markdown/case_study_images.md").then(function(t){var r=JSON.stringify(t.data).replace(/\\n/g,",").replace(/"/g,"").split(",");n.caseStudiesImages=Object.values(r.map(function(n,t){return{image:n}})),n.caseStudiesImages.pop(),n.limit=16,n.loadMore=function(){n.limit=n.limit+16,n.limit>=n.caseStudiesImages.length&&$(".case_study_button").hide()}}),n.caseStudiesFiles=function(n,t){if(t)return"images/case_studies/"+n+".png"}}]),angular.module("norluxAngularApp").controller("ProductCtrl",["$scope","Products","$modal",function(n,t,r){n.$on("$locationChangeStart",function(n){n.preventDefault()}),t.then(function(t){n.categories=[],n.products=t,n.openProduct=function(t){n.products[t].active=!0,n.modalInstance=r.open({templateUrl:"views/view-product-modal.html",scope:n,windowClass:"productModal"}),n.modalInstance.opened.then(function(){var n,t=function(){n=document.getElementsByClassName("productModal")[0],n&&(clearInterval(r),$(n).find(".loader").hide(),$(n).find(".carousel-inner").fadeIn(),$(n).find(".carousel-control").fadeIn())};if(n=document.getElementsByClassName("productModal")[0],!n)var r=setInterval(t,2e3)})};for(var e in n.products)n.products[e].hasOwnProperty("category")&&n.categories.indexOf(n.products[e].category)<0&&n.categories.push(n.products[e].category);n.closeProduct=function(){for(var t in n.products)n.products[t].hasOwnProperty("active")&&(n.products[t].active=!1);n.modalInstance.close()}}),n.productFilter="LED Ceiling Mounted",n.filterCategory=function(t){n.productFilter!=t&&($(".products-container .thumbnail").hide(),n.productFilter=t)}}]),angular.module("norluxAngularApp").controller("StoreCtrl",["$scope","Stores","$filter",function(n,t,r){n.$on("$locationChangeStart",function(n){n.preventDefault()}),t.then(function(t){var r=[];n.stores=t,n.storesToFilter=function(){return r=[],n.stores},n.filterStores=function(n){var t=r.indexOf(n.country)==-1;return t&&r.push(n.country),t}}),n.ordering=function(n){return r("min")(r("map")(n,"country"))}}]),angular.module("norluxAngularApp").directive("scrollOnClick",["$timeout",function(n){return{restrict:"A",link:function(t,r,e){var o=e.href;r.on("click",function(t){t.preventDefault();var e,a=$(document).scrollTop();e=o?$(o):r,a!==e.offset().top-77&&n(function(){$("body, html").animate({scrollTop:e.offset().top-77},"slow")},1),$("#menuModal").modal("hide")})}}}]),angular.module("norluxAngularApp").factory("Products",["$http",function(n){var t="csv/products.csv",r=n.get(t).then(function(n){return CSVToArray(n.data)});return r}]),angular.module("norluxAngularApp").factory("Stores",["$http",function(n){var t="csv/stores.csv",r=n.get(t).then(function(n){return CSVToArray(n.data)});return r}]),angular.module("norluxAngularApp").filter("unique",function(){return function(n,t){var r=[],e=[];return angular.forEach(n,function(n){var o=n[t];e.indexOf(o)===-1&&(e.push(o),r.push(n))}),r}}),angular.module("norluxAngularApp").filter("trustAsHtml",["$sce",function(n){return function(t){return n.trustAsHtml(t)}}]);