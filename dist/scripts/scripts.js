"use strict";function jsonDataArray(e){for(var t=e[0],r=[],n=1,o=e.length;o>n;n++){for(var a=e[n],u={},s=0;s<a.length;s++)u[t[s]]=a[s];r.push(u)}return r}function CSVToArray(e,t){t=t||",";for(var r=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),n=[[]],o=null;o=r.exec(e);){var a=o[1];if(a.length&&a!=t&&n.push([]),o[2])var u=o[2].replace(new RegExp('""',"g"),'"');else var u=o[3];n[n.length-1].push(u)}return jsonDataArray(n)}angular.module("norluxAngularApp",["ngAnimate","ngCookies","angular.filter","ngResource","ngRoute","ngSanitize","ngTouch","btford.markdown","ui.bootstrap"]).config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}),t.html5Mode(!0)}]),angular.module("norluxAngularApp").controller("CarouselCtrl",["$scope","$http",function(e,t){t.get("markdown/main_carousel_images.md").then(function(t){var r=JSON.stringify(t.data).replace(/\\n/g,",").replace(/"/g,"").split(",");e.mainCarouselImages=Object.values(r.map(function(e,t){return{image:e}})),e.mainCarouselImages.pop()})}]).controller("ProductCtrl",["$scope","Products","$modal",function(e,t,r){t.then(function(t){e.categories=[],e.products=t,e.openProduct=function(t){e.products[t].active=!0,e.modalInstance=r.open({templateUrl:"views/view-product-modal.html",scope:e,windowClass:"productModal"}),e.modalInstance.opened.then(function(){var e,t=function(){e=document.getElementsByClassName("productModal")[0],e&&(clearInterval(r),$(e).find(".loader").hide(),$(e).find(".carousel-inner").fadeIn(),$(e).find(".carousel-control").fadeIn())};if(e=document.getElementsByClassName("productModal")[0],!e)var r=setInterval(t,2e3)})};for(var n in e.products)e.products[n].hasOwnProperty("category")&&e.categories.indexOf(e.products[n].category)<0&&e.categories.push(e.products[n].category);e.closeProduct=function(){for(var t in e.products)e.products[t].hasOwnProperty("active")&&(e.products[t].active=!1);e.modalInstance.close()}}),e.productFilter="LED Ceiling",e.filterCategory=function(t){e.productFilter!=t&&($(".products-container .thumbnail").hide(),e.productFilter=t)}}]).controller("StoreCtrl",["$scope","Stores","$filter",function(e,t,r){t.then(function(t){var r=[];e.stores=t,e.storesToFilter=function(){return r=[],e.stores},e.filterStores=function(e){var t=r.indexOf(e.country)==-1;return t&&r.push(e.country),t}}),e.ordering=function(e){return r("min")(r("map")(e,"country"))}}]).controller("CaseStudyCtrl",["$scope","$http","$modal",function(e,t,r){t.get("markdown/case_study_images.md").then(function(t){var n=JSON.stringify(t.data).replace(/\\n/g,",").replace(/"/g,"").split(",");e.caseStudiesImages=Object.values(n.map(function(e,t){return{image:e}})),e.caseStudiesImages.pop(),e.openCaseStudy=function(t){e.caseStudiesImages[t].active=!0,e.modalInstance=r.open({templateUrl:"views/view-case-studies-modal.html",scope:e,windowClass:"caseStudyModal",backdropClass:"caseStudyBackdrop"})},e.closeCaseStudy=function(){for(var t in e.caseStudiesImages)e.caseStudiesImages[t].hasOwnProperty("active")&&(e.caseStudiesImages[t].active=!1);e.modalInstance.close()}}),e.caseStudiesFiles=function(e,t){var r=e.substring(0,e.lastIndexOf("_"));return t?"images/case_studies/"+r+"/thumbnail_"+e+".png":"images/case_studies/"+r+"/"+e+".jpg"}}]).controller("MainCtrl",["$scope",function(e){e.search="",(new WOW).init()}]),angular.module("norluxAngularApp").directive("scrollOnClick",function(){return{restrict:"A",link:function(e,t,r){var n=r.href;t.on("click",function(){var e;e=n?$(n):t,$("body, html").animate({scrollTop:e.offset().top-77},"slow"),$("#menuModal").modal("toggle"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()})}}}),angular.module("norluxAngularApp").factory("Products",["$http",function(e){var t="csv/products.csv",r=e.get(t).then(function(e){return CSVToArray(e.data)});return r}]),angular.module("norluxAngularApp").factory("Stores",["$http",function(e){var t="csv/stores-test.csv",r=e.get(t).then(function(e){return CSVToArray(e.data)});return r}]),angular.module("norluxAngularApp").filter("unique",function(){return function(e,t){var r=[],n=[];return angular.forEach(e,function(e){var o=e[t];n.indexOf(o)===-1&&(n.push(o),r.push(e))}),r}}),angular.module("norluxAngularApp").filter("trustAsHtml",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]);