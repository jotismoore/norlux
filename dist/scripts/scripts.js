"use strict";function jsonDataArray(t){for(var n=t[0],e=[],r=1,o=t.length;o>r;r++){for(var a=t[r],u={},l=0;l<a.length;l++)u[n[l]]=a[l];e.push(u)}return e}function CSVToArray(t,n){n=n||",";for(var e=new RegExp("(\\"+n+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+n+"\\r\\n]*))","gi"),r=[[]],o=null;o=e.exec(t);){var a=o[1];if(a.length&&a!=n&&r.push([]),o[2])var u=o[2].replace(new RegExp('""',"g"),'"');else var u=o[3];r[r.length-1].push(u)}return jsonDataArray(r)}angular.module("norluxAngularApp",["ngAnimate","ngCookies","angular.filter","ngResource","ngRoute","ngSanitize","ngTouch","btford.markdown","ui.bootstrap"]).config(["$routeProvider","$locationProvider",function(t,n){t.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}),n.html5Mode(!0)}]),angular.module("norluxAngularApp").controller("MainCtrl",["$scope",function(t){t.$on("$locationChangeStart",function(t){t.preventDefault()}),t.search="",(new WOW).init()}]),angular.module("norluxAngularApp").controller("CarouselCtrl",["$scope","$http",function(t,n){t.$on("$locationChangeStart",function(t){t.preventDefault()}),n.get("markdown/main_carousel_images.md").then(function(n){var e=JSON.stringify(n.data).replace(/\\n/g,",").replace(/"/g,"").split(",");t.mainCarouselImages=Object.values(e.map(function(t,n){return{image:t}})),t.mainCarouselImages.pop()})}]),angular.module("norluxAngularApp").controller("CaseStudyCtrl",["$scope","$http","$modal",function(t,n,e){t.$on("$locationChangeStart",function(t){t.preventDefault()}),n.get("markdown/case_study_images.md").then(function(n){var e=JSON.stringify(n.data).replace(/\\n/g,",").replace(/"/g,"").split(",");t.caseStudiesImages=Object.values(e.map(function(t,n){return{image:t}})),t.caseStudiesImages.pop(),t.limit=16,t.loadMore=function(){t.limit=t.limit+16,t.limit>=t.caseStudiesImages.length&&$(".case_study_button").hide()}}),t.caseStudiesFiles=function(t,n){if(n)return"images/case_studies/"+t+".png"}}]),angular.module("norluxAngularApp").controller("ProductCtrl",["$scope","Products","$modal",function(t,n,e){t.$on("$locationChangeStart",function(t){t.preventDefault()}),n.then(function(n){t.categories=[],t.products=n,t.openProduct=function(n){t.products[n].active=!0,t.modalInstance=e.open({templateUrl:"views/view-product-modal.html",scope:t,windowClass:"productModal"}),t.modalInstance.opened.then(function(){var t,n=function(){t=document.getElementsByClassName("productModal")[0],t&&(clearInterval(e),$(t).find(".loader").hide(),$(t).find(".carousel-inner").fadeIn(),$(t).find(".carousel-control").fadeIn())};if(t=document.getElementsByClassName("productModal")[0],!t)var e=setInterval(n,2e3)})};for(var r in t.products)t.products[r].hasOwnProperty("category")&&t.categories.indexOf(t.products[r].category)<0&&t.categories.push(t.products[r].category);t.closeProduct=function(){for(var n in t.products)t.products[n].hasOwnProperty("active")&&(t.products[n].active=!1);t.modalInstance.close()}}),t.productFilter="LED Ceiling Mounted",t.filterCategory=function(n){t.productFilter!=n&&($(".products-container .thumbnail").hide(),t.productFilter=n)}}]),angular.module("norluxAngularApp").controller("StoreCtrl",["$scope","Stores","$filter",function(t,n,e){t.$on("$locationChangeStart",function(t){t.preventDefault()}),n.then(function(n){var e=[];t.stores=n,t.storesToFilter=function(){return e=[],t.stores},t.filterStores=function(t){var n=e.indexOf(t.country)==-1;return n&&e.push(t.country),n}}),t.ordering=function(t){return e("min")(e("map")(t,"country"))}}]),angular.module("norluxAngularApp").directive("scrollOnClick",["$timeout",function(t){return{restrict:"A",link:function(n,e,r){var o=r.href;e.on("click",function(n){n.preventDefault();var r,a=$(document).scrollTop();r=o?$(o):e,a!==r.offset().top-77&&t(function(){$("body, html").animate({scrollTop:r.offset().top-77},"slow")},1),$("#menuModal").modal("hide")})}}}]),angular.module("norluxAngularApp").factory("Products",["$http",function(t){var n="csv/products.csv",e=t.get(n).then(function(t){return CSVToArray(t.data)});return e}]),angular.module("norluxAngularApp").factory("Stores",["$http",function(t){var n="csv/stores.csv",e=t.get(n).then(function(t){return CSVToArray(t.data)});return e}]),angular.module("norluxAngularApp").filter("trustAsHtml",["$sce",function(t){return function(n){return t.trustAsHtml(n)}}]);